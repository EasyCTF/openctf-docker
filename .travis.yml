language: python
sudo: required
python:
  - "2.7"
install:
  - sudo apt-get update
  - sudo apt-get -y install libjpeg-dev libmysqlclient-dev memcached tmux mysql-client
  - pip install -r api/requirements.txt
  - py.test --version
script:
  - export SQLALCHEMY_DATABASE_URI=mysql://root:@localhost/openctf
  - python -c 'import pip;installed_packages = pip.get_installed_distributions();installed_packages_list = sorted(["%s==%s" % (i.key, i.version) for i in installed_packages]);print(installed_packages_list)'
  - cd api && py.test
services:
  - mysql
notifications:
  email: false
